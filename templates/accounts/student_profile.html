{% extends 'base.html' %}


{% block content %}
  <div id="content">
    <div class="container-fluid">
      <h3 class="text-dark mb-4">Profile</h3>
      <div class="row mb-3">
        <div class="col-lg-8">
          <div class="row mb-3 d-none">
            <div class="col">
              <div class="card textwhite bg-primary text-white shadow">
                <div class="card-body">
                  <div class="row mb-2">
                    <div class="col">
                      <p class="m-0">Peformance</p>
                      <p class="m-0"><strong>65.2%</strong></p>
                    </div>
                    <div class="col-auto"><i class="fas fa-rocket fa-2x"></i></div>
                  </div>
                  <p class="text-white-50 small m-0"><i class="fas fa-arrow-up"></i>&nbsp;5% since
                    last month</p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card textwhite bg-success text-white shadow">
                <div class="card-body">
                  <div class="row mb-2">
                    <div class="col">
                      <p class="m-0">Peformance</p>
                      <p class="m-0"><strong>65.2%</strong></p>
                    </div>
                    <div class="col-auto"><i class="fas fa-rocket fa-2x"></i></div>
                  </div>
                  <p class="text-white-50 small m-0"><i class="fas fa-arrow-up"></i>&nbsp;5% since
                    last month</p>
                </div>
              </div>
            </div>
          </div>
          {% if edit %}
            <div class="row">
              <div class="col">
                <div class="card shadow mb-3">
                  <div class="card-header py-3">
                    <p class="text-primary m-0 fw-bold">User Settings</p>
                  </div>
                  <div class="card-body">
                    <form action="{% url 'my_profile' %}" method="POST">
                      {% csrf_token %}
                      <div class="row">
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="username"><strong>Username</strong></label><input
                              class="form-control" type="text" id="username"
                              placeholder="{{ user.username }}" name="username" readonly>
                          </div>
                        </div>
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="date_of_birth"><strong>Date of
                            birth</strong></label><input class="form-control"
                                                         id="date_of_birth"
                                                         placeholder="{{ user.student.date_of_birth }}"
                                                         name="date_of_birth" type="date"
                                                         value="{{ user.student.date_of_birth }}">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <div class="mb-3"><label class="form-label" for="email"><strong>Email
                            Address</strong></label><input class="form-control" type="email"
                                                           id="email"
                                                           placeholder="user@example.com"
                                                           name="email"
                                                           value="{{ user.student.email }}">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="name"><strong>Name</strong></label><input
                              class="form-control" type="text" id="name"
                              placeholder="Subhash" name="name" value="{{ user.name }}">
                          </div>
                        </div>
                        <div class="col">
                          <div class="mb-3"><label class="form-label" for="last_name"><strong>Phone
                            Number</strong><br></label><input class="form-control"
                                                              type="text" id="phone"
                                                              placeholder="XXXXXXXXXX"
                                                              name="phone"
                                                              value="{{ user.student.phone }}">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="department"><strong>Department</strong></label>
                            <div class="dropdown">
                              <!-- <button class="btn btn-primary dropdown-toggle"
                                                                    aria-expanded="false" data-bs-toggle="dropdown"
                                                                    type="button">{{ user.department }}
                                                            </button> -->
                              <select class="form-select" name="department"
                                      id="department" value="2">

                                <option value="1"
                                    {% if user.student.department == '1' %}
                                        selected {% endif %} >Aerospace Engineering
                                </option>
                                <option value="2"
                                    {% if user.student.department == '2' %}
                                        selected {% endif %} >Agricultural and Food
                                  Engineering
                                </option>
                                <option value="3"
                                    {% if user.student.department == '3' %}
                                        selected {% endif %} >Architecture and Regional
                                  Planning
                                </option>
                                <option value="4"
                                    {% if user.student.department == '4' %}
                                        selected {% endif %} >Bio Science
                                </option>
                                <option value="5"
                                    {% if user.student.department == '5' %}
                                        selected {% endif %} >Biotechnology
                                </option>
                                <option value="6"
                                    {% if user.student.department == '6' %}
                                        selected {% endif %} >Chemical Engineering
                                </option>
                                <option value="7"
                                    {% if user.student.department == '7' %}
                                        selected {% endif %} >Chemistry
                                </option>
                                <option value="8"
                                    {% if user.student.department == '8' %}
                                        selected {% endif %} >Civil Engineering
                                </option>
                                <option value="9"
                                    {% if user.student.department == '9' %}
                                        selected {% endif %} >Computer Science and
                                  Engineering
                                </option>
                                <option value="10"
                                    {% if user.student.department == '10' %}
                                        selected {% endif %} >Electrical Engineering
                                </option>
                                <option value="11"
                                    {% if user.student.department == '11' %}
                                        selected {% endif %} >Electronics and Electrical
                                  Communication Engg.
                                </option>
                                <option value="12"
                                    {% if user.student.department == '12' %}
                                        selected {% endif %} >Geology and Geophysics
                                </option>
                                <option value="13"
                                    {% if user.student.department == '13' %}
                                        selected {% endif %} >Humanities and Social
                                  Sciences
                                </option>
                                <option value="14"
                                    {% if user.student.department == '14' %}
                                        selected {% endif %} >Industrial and Systems
                                  Engineering
                                </option>
                                <option value="15"
                                    {% if user.student.department == '15' %}
                                        selected {% endif %} >Mathematics
                                </option>
                                <option value="16"
                                    {% if user.student.department == '16' %}
                                        selected {% endif %} >Mechanical Engineering
                                </option>
                                <option value="17"
                                    {% if user.student.department == '17' %}
                                        selected {% endif %} >Metallurgical and
                                  Materials Engineering
                                </option>
                                <option value="18"
                                    {% if user.student.department == '18' %}
                                        selected {% endif %} >Mining Engineering
                                </option>
                                <option value="19"
                                    {% if user.student.department == '19' %}
                                        selected {% endif %} >Ocean Engg and Naval
                                  Architecture
                                </option>
                                <option value="20"
                                    {% if user.student.department == '20' %}
                                        selected {% endif %} >Physics
                                </option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="resume"><strong>Resume</strong></label><input
                              class="form-control" type="file" id="resume"></div>
                          <a href="{% url 'view_resume' user.id %}" class="btn btn-success">View
                            Resume</a>
                        </div>
                      </div>
                      <div class="mb-3">
                        <button class="btn btn-primary btn-sm" type="submit">Save Settings
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          {% else %}
            <div class="row">
              <div class="col">
                <div class="card shadow mb-3">
                  <div class="card-header py-3">
                    <p class="text-primary m-0 fw-bold">User Details</p>
                  </div>
                  <div class="card-body">
                    <form action="{% url 'my_profile' %}" method="POST">
                      {% csrf_token %}
                      <div class="row">
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="username"><strong>Username</strong></label><input
                              class="form-control" type="text" id="username"
                              placeholder="{{ user.username }}" name="username" readonly>
                          </div>
                        </div>
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="date_of_birth"><strong>Date of
                            birth</strong></label><input class="form-control"
                                                         id="date_of_birth"
                                                         placeholder="{{ user.student.date_of_birth }}"
                                                         name="date_of_birth" type="date">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <div class="mb-3"><label class="form-label" for="email"><strong>Email
                            Address</strong></label><input class="form-control" type="email"
                                                           id="email"
                                                           placeholder="{{ user.student.email }}"
                                                           name="email">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="name"><strong>Name</strong></label><input
                              class="form-control" type="text" id="name"
                              placeholder="{{ user.name }}" name="name">
                          </div>
                        </div>
                        <div class="col">
                          <div class="mb-3"><label class="form-label" for="last_name"><strong>Phone
                            Number</strong><br></label><input class="form-control"
                                                              type="text" id="phone"
                                                              placeholder="{{ user.student.phone }}"
                                                              name="phone">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <div class="mb-3"><label class="form-label"
                                                   for="department"><strong>Department</strong></label>
                            <div class="dropdown" readonly>
                              <!-- <button class="btn btn-primary dropdown-toggle"
                                                                    aria-expanded="false" data-bs-toggle="dropdown"
                                                                    type="button">{{ user.department }}
                                                            </button> -->
                              <select class="form-select" name="department"
                                      id="department">

                                <option value="1"
                                    {% if user.student.department == '1' %}
                                        selected {% endif %} >Aerospace Engineering
                                </option>
                                <option value="2"
                                    {% if user.student.department == '2' %}
                                        selected {% endif %} >Agricultural and Food
                                  Engineering
                                </option>
                                <option value="3"
                                    {% if user.student.department == '3' %}
                                        selected {% endif %} >Architecture and Regional
                                  Planning
                                </option>
                                <option value="4"
                                    {% if user.student.department == '4' %}
                                        selected {% endif %} >Bio Science
                                </option>
                                <option value="5"
                                    {% if user.student.department == '5' %}
                                        selected {% endif %} >Biotechnology
                                </option>
                                <option value="6"
                                    {% if user.student.department == '6' %}
                                        selected {% endif %} >Chemical Engineering
                                </option>
                                <option value="7"
                                    {% if user.student.department == '7' %}
                                        selected {% endif %} >Chemistry
                                </option>
                                <option value="8"
                                    {% if user.student.department == '8' %}
                                        selected {% endif %} >Civil Engineering
                                </option>
                                <option value="9"
                                    {% if user.student.department == '9' %}
                                        selected {% endif %} >Computer Science and
                                  Engineering
                                </option>
                                <option value="10"
                                    {% if user.student.department == '10' %}
                                        selected {% endif %} >Electrical Engineering
                                </option>
                                <option value="11"
                                    {% if user.student.department == '11' %}
                                        selected {% endif %} >Electronics and Electrical
                                  Communication Engg.
                                </option>
                                <option value="12"
                                    {% if user.student.department == '12' %}
                                        selected {% endif %} >Geology and Geophysics
                                </option>
                                <option value="13"
                                    {% if user.student.department == '13' %}
                                        selected {% endif %} >Humanities and Social
                                  Sciences
                                </option>
                                <option value="14"
                                    {% if user.student.department == '14' %}
                                        selected {% endif %} >Industrial and Systems
                                  Engineering
                                </option>
                                <option value="15"
                                    {% if user.student.department == '15' %}
                                        selected {% endif %} >Mathematics
                                </option>
                                <option value="16"
                                    {% if user.student.department == '16' %}
                                        selected {% endif %} >Mechanical Engineering
                                </option>
                                <option value="17"
                                    {% if user.student.department == '17' %}
                                        selected {% endif %} >Metallurgical and
                                  Materials Engineering
                                </option>
                                <option value="18"
                                    {% if user.student.department == '18' %}
                                        selected {% endif %} >Mining Engineering
                                </option>
                                <option value="19"
                                    {% if user.student.department == '19' %}
                                        selected {% endif %} >Ocean Engg and Naval
                                  Architecture
                                </option>
                                <option value="20"
                                    {% if user.student.department == '20' %}
                                        selected {% endif %} >Physics
                                </option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="col">
                          <div class="mb-3"><a href="{% url 'view_resume' user.id %}" class="btn btn-primary btn-sm">View
                            Resume</a></div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <script>

    date_string = "{{ user.student.date_of_birth }}".replaceAll(".", "") + " UTC";
    document.getElementById("date_of_birth").value = (new Date(date_string)).toISOString().split('T')[0];
</script>

{% endblock %}